<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>D√ºsselthaler Stra√üe, D√ºsseldorf - WG-FINDER Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --orange: #f89a28;
      --blue: #0077c8;
      --grey-bg: #f3f4f7;
      --border-color: #d5d7dd;
      --text-main: #222;
      --text-muted: #666;
      --bg-card: #ffffff;

      /* widget vars */
      --card-bg: #ffffff;
      --border: #d4d8e3;
      --text: #111827;
      --muted: #6b7280;

      --cl-green: #22c55e;
      --cl-green-soft: rgba(34, 197, 94, 0.12);

      --cl-amber: #f97316;
      --cl-amber-soft: rgba(249, 115, 22, 0.12);

      --cl-red: #ef4444;
      --cl-red-soft: rgba(239, 68, 68, 0.12);

      --user-marker: #8b5cf6; /* violet */
      --wg-marker: #0ea5e9;   /* sky blue */
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: var(--grey-bg);
      color: var(--text-main);
    }

    a {
      color: var(--blue);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    /* HEADER */

    .top-bar {
      background: #ffffff;
      border-bottom: 1px solid var(--border-color);
    }

    .top-bar-inner {
      max-width: 1180px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.6rem 1.25rem;
    }

    .logo {
      font-weight: 800;
      color: #ff6600;
      font-size: 1.25rem;
      letter-spacing: 0.04em;
    }

    .logo span {
      color: #333;
      font-weight: 700;
    }

    .main-nav {
      display: flex;
      gap: 1.1rem;
      font-size: 0.9rem;
      align-items: center;
    }

    .main-nav a {
      color: #444;
      font-weight: 500;
      white-space: nowrap;
    }

    .user-nav {
      display: flex;
      gap: 1rem;
      font-size: 0.85rem;
      align-items: center;
    }

    .user-nav button {
      border-radius: 4px;
      border: 1px solid var(--border-color);
      background: #ffffff;
      padding: 0.25rem 0.7rem;
      font-size: 0.8rem;
      cursor: pointer;
    }

    /* PAGE LAYOUT */

    .page-wrapper {
      max-width: 1180px;
      margin: 1.25rem auto 2.4rem;
      padding: 0 1.25rem 2rem;
      display: grid;
      grid-template-columns: 390px minmax(0, 1fr);
      gap: 1.5rem;
    }

    @media (max-width: 960px) {
      .page-wrapper {
        grid-template-columns: 1fr;
      }
    }

    .main-column {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .card {
      background: var(--bg-card);
      border-radius: 8px;
      border: 1px solid var(--border-color);
      padding: 1.25rem 1.5rem;
    }

    /* SIDEBAR */

    .sidebar-card {
      background: var(--bg-card);
      border-radius: 8px;
      border: 1px solid var(--border-color);
      padding: 1rem 1.25rem;
      margin-bottom: 1rem;
      font-size: 0.85rem;
    }

    .profile-header {
      display: flex;
      align-items: center;
      gap: 0.6rem;
    }

    .profile-avatar {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: #e4e6ec;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: #555;
      font-size: 0.8rem;
    }

    .profile-name {
      font-weight: 600;
      margin-bottom: 0.2rem;
      font-size: 1rem;
    }

    .profile-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.15rem;
      font-size: 0.7rem;
      color: #2e7d32;
      margin-top: 0.15rem;
    }

    .sidebar-card .label {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }

    .sidebar-actions {
      margin-top: 0.8rem;
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }

    .btn-primary,
    .btn-outline {
      display: inline-block;
      text-align: center;
      padding: 0.4rem 0.6rem;
      border-radius: 4px;
      font-size: 0.8rem;
      cursor: pointer;
      border: 1px solid transparent;
      font-weight: 600;
    }

    .btn-primary {
      background: var(--orange);
      border-color: var(--orange);
      color: #ffffff;
    }

    .btn-outline {
      background: #ffffff;
      border-color: var(--border-color);
      color: #333;
    }

    .sidebar-meta {
      margin-top: 0.4rem;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .sidebar-note {
      font-size: 0.78rem;
      color: var(--text-muted);
      margin-top: 0.6rem;
    }

    /* HERO CARD (TITLE + IMAGE + DARK BAR) */

    .hero-card {
      padding: 1.25rem 1.5rem 0.5rem;
    }

    .hero-header {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      margin-bottom: 0.8rem;
    }

    .hero-icon {
      font-size: 1.2rem;
    }

    .hero-title {
      font-size: 1.4rem;
      font-weight: 700;
    }

    .hero-image-wrapper {
      position: relative;
      border-radius: 10px;
      overflow: hidden;
      background: #dfe2ea;
      height: 280px;
    }

    .hero-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .hero-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 38px;
      height: 62px;
      background: rgba(0, 0, 0, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 1.2rem;
      cursor: default;
      user-select: none;
    }

    .hero-arrow.left {
      left: 0;
      border-radius: 0 8px 8px 0;
    }

    .hero-arrow.right {
      right: 0;
      border-radius: 8px 0 0 8px;
    }

    .hero-photo-badge {
      position: absolute;
      bottom: 10px;
      left: 10px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 4px;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.2rem 0.5rem;
      font-size: 0.8rem;
      color: #333;
    }

    .hero-photo-icon {
      width: 18px;
      height: 18px;
      border-radius: 2px;
      background: #f0f0f0;
    }

    .hero-ad-number {
      margin-top: 0.4rem;
      font-size: 0.76rem;
      color: #333;
    }

    .hero-meta-bar {
      margin-top: 0.7rem;
      margin-left: -1.5rem;
      margin-right: -1.5rem;
      background: #3f3f3f;
      color: #fff;
      padding: 0.8rem 1.5rem;
      border-radius: 0 0 8px 8px;
      display: flex;
      justify-content: center;
      gap: 6rem;
      font-size: 0.98rem;
    }

    .hero-meta-bar span {
      white-space: nowrap;
    }

    .hero-meta-label {
      opacity: 0.9;
      margin-right: 0.25rem;
    }

    .hero-meta-value {
      font-weight: 700;
    }

    /* SIMPLE CARD HEADINGS */

    .card-title {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 0.8rem;
    }

    /* KOSTEN CARD */

    .kosten-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      font-size: 0.95rem;
    }

    .kosten-grid dt {
      font-weight: 400;
      margin-bottom: 0.25rem;
    }

    .kosten-grid dd {
      margin: 0 0 0.4rem;
      font-weight: 500;
    }

    /* ADRESSE / VERF CARD */

    .address-grid {
      display: grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 2rem;
      font-size: 0.95rem;
    }

    .address-block-title {
      font-weight: 600;
      font-size: 1.05rem;
      margin-bottom: 0.6rem;
    }

    .address-grid p {
      margin: 0;
      line-height: 1.5;
    }

    .address-grid dl {
      margin: 0;
    }

    .address-grid dt {
      font-weight: 400;
      margin-bottom: 0.25rem;
    }

    .address-grid dd {
      margin: 0 0 0.4rem;
      font-weight: 500;
    }

    .address-link {
      margin-top: 0.8rem;
      font-size: 0.9rem;
    }

    /* ZIMMER CARD */

    .room-text {
      font-size: 0.95rem;
      line-height: 1.6;
      margin-top: 0.4rem;
      margin-bottom: 1.5rem;
      text-align: left;
    }

    .translation-info {
      text-align: center;
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    /* MATCH WIDGET CARD (generic text style) */

    .match-widget-box > p {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-top: 0;
      margin-bottom: 0.6rem;
    }

    /* WG-DETAILS CARD */

    .wg-details {
      font-size: 0.95rem;
    }

    .wg-details h3 {
      margin: 0.3rem 0;
      font-size: 1.05rem;
    }

    .wg-details ul {
      margin: 0 0 1rem;
      padding-left: 1.2rem;
    }

    /* ANGABEN ZUM OBJEKT */

    .object-icons-row {
      display: flex;
      gap: 3rem;
      margin-top: 1.2rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .object-icon {
      text-align: center;
      font-size: 0.9rem;
    }

    .object-icon-circle {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: #eeeeee;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 0.5rem;
      font-size: 2rem;
    }

    /* MAP CARD */

    .map-placeholder {
      height: 260px;
      background: #dfe2ea;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      color: #555;
      text-align: center;
      padding: 0;
      overflow: hidden;
    }

    .map-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    /* FOOTER */

    .footer {
      border-top: 1px solid var(--border-color);
      background: #ffffff;
      padding: 1.5rem 0 2rem;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .footer-inner {
      max-width: 1180px;
      margin: 0 auto;
      padding: 0 1.25rem;
    }

    .footer-links-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 0.3rem 2rem;
    }

    .footer-bottom {
      margin-top: 1rem;
    }

    @media (max-width: 700px) {
      .kosten-grid,
      .address-grid {
        grid-template-columns: 1fr;
      }
      .hero-meta-bar {
        flex-direction: column;
        gap: 0.4rem;
        align-items: flex-start;
      }
      .main-nav {
        display: none; /* hide nav on tiny screens to avoid wrapping chaos */
      }
    }

    /* === WIDGET STYLES (NO GLOBAL body/ * OVERRIDES) === */

    .wg-widget {
      margin: 0.6rem auto 0;
      padding: 1rem 1.1rem 1.1rem;
      background: var(--card-bg);
      border-radius: 10px;
      border: 1px solid var(--border);
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.06);
      font-size: 0.9rem;
      color: var(--text);
    }

    .wg-widget__eyebrow {
      display: inline-block;
      font-size: 0.7rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 0.15rem;
    }

    .wg-widget__title {
      margin: 0;
      font-size: 1.1rem;
      font-weight: 600;
    }

    .wg-widget__subtitle {
      margin: 0.35rem 0 0.9rem;
      font-size: 0.8rem;
      color: var(--muted);
    }

    .wg-widget__overall {
      display: flex;
      align-items: center;
      gap: 0.9rem;
      padding: 0.7rem 0.8rem;
      border-radius: 8px;
      background: #f9fafb;
      border: 1px dashed var(--border);
    }

    .wg-widget__overall-circle {
      width: 72px;
      height: 72px;
      border-radius: 50%;
      background: var(--cl-amber-soft); /* default neutral */
      border: 2px solid var(--cl-amber);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .wg-widget__overall-circle--strong {
      border-color: var(--cl-green);
      background: var(--cl-green-soft);
    }

    .wg-widget__overall-circle--medium {
      border-color: var(--cl-amber);
      background: var(--cl-amber-soft);
    }

    .wg-widget__overall-circle--weak {
      border-color: var(--cl-red);
      background: var(--cl-red-soft);
    }

    .wg-widget__overall-value {
      font-size: 1.3rem;
      font-weight: 700;
    }

    .wg-widget__overall-unit {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted);
    }

    .wg-widget__overall-label {
      font-size: 0.85rem;
      color: var(--text);
    }

    .wg-widget__legend {
      margin-top: 0.7rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
      font-size: 0.75rem;
      color: var(--muted);
    }

    .legend-item {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
    }

    .legend-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      display: inline-block;
    }

    .legend-dot--strong {
      background: var(--cl-green);
    }

    .legend-dot--medium {
      background: var(--cl-amber);
    }

    .legend-dot--weak {
      background: var(--cl-red);
    }

    .wg-widget__dimensions {
      list-style: none;
      margin: 0.9rem 0 0;
      padding: 0;
    }

    .dimension {
      padding: 0.6rem 0;
      border-bottom: 1px solid #edf0f5;
    }

    .dimension:last-child {
      border-bottom: none;
    }

    .dimension__top {
      display: flex;
      justify-content: space-between;
      gap: 0.5rem;
      margin-bottom: 0.3rem;
    }

    .dimension__label {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .dimension__tag {
      font-size: 0.7rem;
      padding: 0.05rem 0.5rem;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      color: var(--muted);
      white-space: nowrap;
    }

    .dimension--strong .dimension__tag {
      border-color: rgba(34, 197, 94, 0.3);
      color: var(--cl-green);
    }

    .dimension--medium .dimension__tag {
      border-color: rgba(249, 115, 22, 0.35);
      color: #c0560d;
    }

    .dimension--weak .dimension__tag {
      border-color: rgba(239, 68, 68, 0.3);
      color: var(--cl-red);
    }

    .dimension__line {
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.1rem;
    }

    .dimension__side-label {
      font-size: 0.75rem;
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 0.18rem;
      white-space: nowrap;
    }

    .role-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      display: inline-block;
    }

    .role-dot--user {
      background: var(--user-marker);
    }

    .role-dot--wg {
      background: var(--wg-marker);
    }

    .dimension__track {
      position: relative;
      height: 18px;
    }

    .dimension__track-base {
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 2px;
      transform: translateY(-50%);
      border-radius: 999px;
      background: #e5e7eb;
    }

    .dimension--strong .dimension__track-base {
      background: rgba(34, 197, 94, 0.22);
    }

    .dimension--medium .dimension__track-base {
      background: rgba(249, 115, 22, 0.22);
    }

    .dimension--weak .dimension__track-base {
      background: rgba(239, 68, 68, 0.22);
    }

    .dimension__segment {
      position: absolute;
      top: 50%;
      height: 4px;
      transform: translateY(-50%);
      border-radius: 999px;
      width: 0;
      left: 0;
      transition: width 0.45s ease-out, left 0.45s ease-out;
    }

    .dimension--strong .dimension__segment {
      background: var(--cl-green);
    }

    .dimension--medium .dimension__segment {
      background: var(--cl-amber);
    }

    .dimension--weak .dimension__segment {
      background: var(--cl-red);
    }

    .dimension__marker {
      position: absolute;
      top: 50%;
      width: 11px;
      height: 11px;
      border-radius: 50%;
      border: 2px solid #ffffff;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.7);
      transition: left 0.45s ease-out;
    }

    .dimension__marker--user {
      background: var(--user-marker);
    }

    .dimension__marker--wg {
      background: var(--wg-marker);
    }

    .wg-widget__status {
      margin-top: 0.9rem;
      font-size: 0.78rem;
      color: var(--muted);
    }
  </style>
</head>
<body>
    <!-- HEADER (same as wg-eins, with Mein Profil linking to fragebogen.html) -->
  <header class="top-bar">
    <div class="top-bar-inner">
      <div class="logo">WG-<span>FINDER</span></div>
      <nav class="main-nav">
        <a href="#">Angebote &amp; Gesuche</a>
        <a href="wg-eins.html">WG&nbsp;Eins</a>
        <a href="wg-zwei.html">WG&nbsp;Zwei</a>
        <a href="wg-drei.html">WG&nbsp;Drei</a>
      </nav>
      <div class="user-nav">
        <a href="fragebogen.html">Mein Profil</a>
        <button>Einloggen</button>
      </div>
    </div>
  </header>

  <!-- PAGE CONTENT -->
  <main class="page-wrapper">
    <!-- SIDEBAR -->
    <aside>
      <!-- existing sidebar card -->
      <div class="sidebar-card">
        <div class="profile-header">
          <div class="profile-avatar">HA</div>
          <div>
            <div class="profile-name">HousingAnywhere</div>
            <div class="profile-badge">‚úî Verifizierter Anbieter</div>
            <div class="sidebar-meta">Mitglied seit Juli 2023</div>
          </div>
        </div>

        <div class="label">Aktionen</div>
        <div class="sidebar-actions">
          <button class="btn-primary">Buchungsanfrage</button>
          <button class="btn-outline">Favorisieren</button>
          <button class="btn-outline">Notiz erstellen</button>
          <button class="btn-outline">Drucken</button>
        </div>

        <p class="sidebar-note">
          Diese Anzeige ist Teil eines <strong>WG-FINDER</strong>-Prototyps.
          Alle Inhalte sind fiktiv und dienen nur Testzwecken.
        </p>
      </div>

           <!-- WG-Match Widget (ein einzelner Kasten im Sidebar) -->
      <div class="wg-widget">
        <header class="wg-widget__header">
          <div class="wg-widget__title-row">
            <h2 class="wg-widget__title" style="color: #8b5cf6;">WG-Matchcheck</h2>
          </div>
          <p class="wg-widget__subtitle">
            Wie gut passen deine Pr√§ferenzen zu dieser WG?
          </p>
        </header>

        <div class="wg-widget__overall">
          <div class="wg-widget__overall-circle">
            <span id="overallScore" class="wg-widget__overall-value">--</span>
            <span class="wg-widget__overall-unit">%</span>
          </div>
          <div id="overallLabel" class="wg-widget__overall-label">
            Noch keine Daten
          </div>
        </div>

        <div class="wg-widget__legend">
          <span class="legend-item">
            <span class="legend-dot legend-dot--strong"></span>
            starker Match
          </span>
          <span class="legend-item">
            <span class="legend-dot legend-dot--medium"></span>
            neutral
          </span>
          <span class="legend-item">
            <span class="legend-dot legend-dot--weak"></span>
            Konfliktpotenzial
          </span>
        </div>

        <ul id="dimensionList" class="wg-widget__dimensions">
          <!-- per-dimension rows will be injected here -->
        </ul>

        <p id="statusMessage" class="wg-widget__status">
          Bitte f√ºlle zuerst den Profilfragebogen aus.
        </p>
      </div>

    </aside>

    <!-- MAIN COLUMN -->
    <section class="main-column">

      <!-- HERO CARD -->
      <article class="card hero-card">
        <div class="hero-header">
          <div class="hero-icon">üèôÔ∏è</div>
          <h1 class="hero-title">D√ºsselthaler Stra√üe, D√ºsseldorf</h1>
        </div>

        <div class="hero-image-wrapper">
          <img
            src="wg-one.jpg"
            alt="Zimmeransicht ‚Äì Beispielsfoto"
            class="hero-image"
          />
          <div class="hero-arrow left">&#x276E;</div>
          <div class="hero-arrow right">&#x276F;</div>

          <div class="hero-photo-badge">
            <div class="hero-photo-icon"></div>
            <span>4 Fotos</span>
          </div>
        </div>

        <div class="hero-ad-number">
          Anzeigenummer: 12277873
        </div>

        <div class="hero-meta-bar">
          <span>
            <span class="hero-meta-label">Zimmergr√∂√üe :</span>
            <span class="hero-meta-value">10m¬≤</span>
          </span>
          <span>
            <span class="hero-meta-label">Gesamtmiete :</span>
            <span class="hero-meta-value">500‚Ç¨</span>
          </span>
        </div>
      </article>

      <!-- KOSTEN CARD -->
      <section class="card">
        <h2 class="card-title">Kosten</h2>
        <dl class="kosten-grid">
          <div>
            <dt>Miete:</dt>
            <dd>500‚Ç¨</dd>
            <dt>Nebenkosten: ‚ìò</dt>
            <dd>0‚Ç¨</dd>
            <dt>Sonstige Kosten:</dt>
            <dd>n.a.</dd>
          </div>
          <div>
            <dt>Kaution:</dt>
            <dd>n.a.</dd>
            <dt>Abl√∂severeinbarung:</dt>
            <dd>n.a.</dd>
            <dt>SCHUFA-Auskunft:</dt>
            <dd><a href="#">In 3 Minuten bereit</a></dd>
          </div>
        </dl>
      </section>

      <!-- ADRESSE + VERF CARD -->
      <section class="card">
        <div class="address-grid">
          <div>
            <div class="address-block-title">Adresse</div>
            <p>D√ºsselthaler Stra√üe<br />40211 D√ºsseldorf Pempelfort</p>
          </div>
          <div>
            <div class="address-block-title">Verf√ºgbarkeit</div>
            <dl>
              <dt>frei ab:</dt>
              <dd><strong>01.10.2025</strong></dd>
              <dt>Online:</dt>
              <dd style="color:#888;">24.09.2025</dd>
            </dl>
          </div>
        </div>
        <div class="address-link">
          <a href="#">Zur Website</a>
        </div>
      </section>

      <!-- ZIMMER CARD -->
      <section class="card">
        <h2 class="card-title">Zimmer</h2>
        <p class="room-text">
          Geteilte Wohnung, 4 verschiedene Zimmer, Gemeinschaftsk√ºche und Bad,
          zentrale Lage, 5. Stock, kein Aufzug. Miete beinhaltet Strom, Internet
          und zweiw√∂chentliche Reinigung von K√ºche, Flur und Bad.
        </p>
        <div class="translation-info">
          Text automatisch √ºbersetzt ‚Äì <a href="#">Original anzeigen</a>
        </div>
      </section>

      <!-- WG-DETAILS CARD -->
      <section class="card wg-details">
        <h2 class="card-title">WG-Details</h2>

        <h3>Die WG:</h3>
        <ul>
          <li>10m¬≤ Zimmer in 2er WG</li>
          <li>Wohnungsgr√∂√üe: 95m¬≤</li>
          <li>2er WG</li>
          <li>Rauchen nicht erw√ºnscht</li>
          <li>keine Zweck-WG</li>
        </ul>

        <h3>Gesucht wird:</h3>
        <ul>
          <li>Geschlecht egal</li>
        </ul>
      </section>

      <!-- ANGABEN ZUM OBJEKT -->
      <section class="card">
        <h2 class="card-title">Angaben zum Objekt</h2>
        <div class="object-icons-row">
          <div class="object-icon">
            <div class="object-icon-circle">üõèÔ∏è</div>
            <div>m√∂bliert</div>
          </div>
          <div class="object-icon">
            <div class="object-icon-circle">‚¨õ</div>
            <div>Laminat</div>
          </div>
        </div>
      </section>

      <!-- MAP CARD -->
      <section class="card">
        <h2 class="card-title">Lage</h2>
        <div class="map-placeholder">
          <img
            src="wg-map.png"
            alt="Kartenansicht ‚Äì Beispielscreenshot"
            class="map-image"
          />
        </div>
      </section>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer-inner">
      <div class="footer-links-grid">
        <span>WG-Zimmer in Berlin</span>
        <span>WG-Zimmer in M√ºnchen</span>
        <span>WG-Zimmer in K√∂ln</span>
        <span>WG-Zimmer in Hamburg</span>
        <span>WG-Zimmer in Leipzig</span>
        <span>WG-Zimmer in Frankfurt</span>
        <span>WG-Zimmer in Stuttgart</span>
        <span>WG-Zimmer in D√ºsseldorf</span>
      </div>
      <div class="footer-bottom">
        <p>
          Hilfe &amp; Kontakt ¬∑ Impressum ¬∑ AGB ¬∑ Datenschutz ¬∑ Barrierefreiheit ¬∑ Cookie-Einstellungen
        </p>
        <p>
          Diese Seite ist eine nicht-kommerzielle Demo im Rahmen eines Hochschulprojekts
          und steht in keinem Zusammenhang mit der Plattform WG-Gesucht.de.
        </p>
      </div>
    </div>
  </footer>

  <script>
    // Key must match the survey page
    const STORAGE_KEY = "wgFinderSurveyV1";

    // WG profile (1‚Äì10 for each question)
    const WG_PROFILE = {
      id: "WG-EINS",
      name: "D√ºsselthaler Stra√üe",
      values: {
        q1: 8, // Gemeinsam kochen
        q2: 7, // Ruhige WG
        q3: 6, // Besuch m√∂glich
        q4: 9, // Sauberkeit & Ordnung
        q5: 7, // Gemeinsame Aktivit√§ten
        q6: 5, // Privatsph√§re
        q7: 6  // Spontane G√§ste
      }
    };

    // Labels
    const QUESTION_META = {
      q1: { label: "Gemeinsam kochen" },
      q2: { label: "Ruhige WG" },
      q3: { label: "Besuch von Freund:innen" },
      q4: { label: "Sauberkeit & Ordnung" },
      q5: { label: "Gemeinsame Aktivit√§ten" },
      q6: { label: "Privatsph√§re & R√ºckzug" },
      q7: { label: "Spontane G√§ste" }
    };

    function classifyDifference(diff) {
      if (diff <= 2) return "strong";
      if (diff <= 4) return "medium";
      return "weak";
    }

    function labelForClass(cls) {
      if (cls === "strong") return "starker Match";
      if (cls === "medium") return "neutral";
      return "Konfliktpotenzial";
    }

    function scoreFromDiff(diff) {
      const maxDiff = 9;
      const clamped = Math.min(Math.max(diff, 0), maxDiff);
      const score = 100 - (clamped / maxDiff) * 100;
      return Math.round(score);
    }

    function labelForOverall(score) {
      if (score > 66) return "Sehr guter Match mit dieser WG.";
      if (score >= 33) return "Guter Match, ein paar Unterschiede.";
      if (score > 0) return "Eher schwierig ‚Äì pr√ºfe die Details.";
      return "Noch keine Daten.";
    }

    function classForOverall(score) {
      if (score > 66) return "strong";
      if (score >= 33) return "medium";
      if (score > 0) return "weak";
      return null;
    }

    function loadUserData() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return null;
        const parsed = JSON.parse(raw);
        if (!parsed || !parsed.answers) return null;
        return parsed.answers;
      } catch (err) {
        console.warn("Fehler beim Lesen aus localStorage:", err);
        return null;
      }
    }

    function valueToPercent(v) {
      const value = Math.min(Math.max(v, 1), 10);
      return ((value - 1) / 9) * 100;
    }

    function renderWidget() {
      const answers = loadUserData();
      const statusEl = document.getElementById("statusMessage");
      const overallScoreEl = document.getElementById("overallScore");
      const overallLabelEl = document.getElementById("overallLabel");
      const overallCircleEl = document.querySelector(".wg-widget__overall-circle");
      const dimensionListEl = document.getElementById("dimensionList");

      const resetCircleClasses = () => {
        overallCircleEl.classList.remove(
          "wg-widget__overall-circle--strong",
          "wg-widget__overall-circle--medium",
          "wg-widget__overall-circle--weak"
        );
      };

      if (!answers) {
        overallScoreEl.textContent = "--";
        overallLabelEl.textContent = "Noch keine Daten";
        statusEl.textContent =
          "Bitte f√ºlle zuerst den Profilfragebogen aus. Danach aktualisiert sich dieser Bereich automatisch.";
        resetCircleClasses();
        return;
      }

      statusEl.textContent =
        "Basierend auf deinen Antworten aus dem Profilfragebogen.";

      const dimensions = [];

      Object.keys(WG_PROFILE.values).forEach((qKey) => {
        const userValueRaw = answers[qKey];
        if (typeof userValueRaw !== "number") return;

        const userValue = userValueRaw;
        const wgValue = WG_PROFILE.values[qKey];
        const diff = Math.abs(userValue - wgValue);
        const cls = classifyDifference(diff);
        const dimScore = scoreFromDiff(diff);
        const label = QUESTION_META[qKey]?.label || qKey;

        dimensions.push({
          key: qKey,
          label,
          userValue,
          wgValue,
          diff,
          cls,
          dimScore
        });
      });

      if (!dimensions.length) {
        overallScoreEl.textContent = "--";
        overallLabelEl.textContent = "Noch keine Daten";
        statusEl.textContent =
          "Keine auswertbaren Antworten gefunden. Bitte f√ºlle den Fragebogen vollst√§ndig aus.";
        resetCircleClasses();
        return;
      }

      const sum = dimensions.reduce((acc, d) => acc + d.dimScore, 0);
      const overallScore = Math.round(sum / dimensions.length);
      overallScoreEl.textContent = overallScore;
      overallLabelEl.textContent = labelForOverall(overallScore);

      resetCircleClasses();
      const overallClass = classForOverall(overallScore);
      if (overallClass) {
        overallCircleEl.classList.add(
          `wg-widget__overall-circle--${overallClass}`
        );
      }

      dimensionListEl.innerHTML = "";

      dimensions.forEach((dim) => {
        const li = document.createElement("li");
        li.className = `dimension dimension--${dim.cls}`;

        li.innerHTML = `
          <div class="dimension__top">
            <span class="dimension__label">${dim.label}</span>
            <span class="dimension__tag">${labelForClass(dim.cls)}</span>
          </div>
          <div class="dimension__line">
            <span class="dimension__side-label">
              <span class="role-dot role-dot--user"></span>
              Du: ${dim.userValue}
            </span>
            <div class="dimension__track">
              <div class="dimension__track-base"></div>
              <div class="dimension__segment"></div>
              <div class="dimension__marker dimension__marker--user" title="Dein Wert"></div>
              <div class="dimension__marker dimension__marker--wg" title="WG-Wert"></div>
            </div>
            <span class="dimension__side-label">
              WG: ${dim.wgValue}
              <span class="role-dot role-dot--wg"></span>
            </span>
          </div>
        `;

        const markerUser = li.querySelector(".dimension__marker--user");
        const markerWg = li.querySelector(".dimension__marker--wg");
        const segment = li.querySelector(".dimension__segment");

        const userPos = valueToPercent(dim.userValue);
        const wgPos = valueToPercent(dim.wgValue);

        const leftPos = Math.min(userPos, wgPos);
        const width = Math.abs(userPos - wgPos);

        requestAnimationFrame(() => {
          markerUser.style.left = `${userPos}%`;
          markerWg.style.left = `${wgPos}%`;
          segment.style.left = `${leftPos}%`;
          segment.style.width = `${width}%`;
        });

        dimensionListEl.appendChild(li);
      });
    }

    document.addEventListener("DOMContentLoaded", renderWidget);
  </script>
</body>
</html>
